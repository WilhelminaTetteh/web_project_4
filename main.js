(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._settings=e,this._form=n}var n,r;return n=t,(r=[{key:"_showErrorMessage",value:function(e,t){var n=this._form.querySelector("#".concat(e.id,"-error"));n.textContent=t,e.classList.add(this._settings.inputErrorClass),n.classList.add(this._settings.errorClass)}},{key:"_hideErrorMessage",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));t.textContent="",e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e,e.validationMessage)}},{key:"_isFormValid",value:function(e){return e.every((function(e){return e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._isFormValid(t)?(e.disabled=!1,e.classList.remove(this._settings.inactiveButtonClass)):(e.disabled=!0,e.classList.add(this._settings.inactiveButtonClass))}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),n=this._form.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(n,t),this._form.addEventListener("reset",(function(){t.forEach((function(t){e._hideErrorMessage(t)})),n.disabled=!0,n.classList.add(e._settings.inactiveButtonClass)})),t.forEach((function(r){r.addEventListener("input",(function(o){e._checkInputValidity(r),e._toggleButtonState(n,t)}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._isLiked=!1,this._id=t._id,this._userInfo=n,this._handleCardClick=r,this._handleDeleteCardClick=o,this._handleLikeClick=i}var t,r;return t=e,(r=[{key:"getCardLikes",value:function(){return this._data.likes.length}},{key:"getId",value:function(){return this._id}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("grid__icon_active"),this._handleLikeClick()}},{key:"isLiked",value:function(){return this._isLiked}},{key:"handleDeleteIcon",value:function(){this._cardElement.remove()}},{key:"_setEventListeners",value:function(){var e=this,t=this._cardElement.querySelector(".grid__icon"),n=this._cardElement.querySelector(".grid__delete-icon");t.addEventListener("click",(function(){return e._handleLikeClick()})),n.addEventListener("click",(function(){return e._handleDeleteCardClick()})),this._cardImage.addEventListener("click",(function(){return e._handleCardClick()}))}},{key:"updateLikeCount",value:function(e){this._cardElement.querySelector(".grid__likes").textContent=e}},{key:"updateLikeIconState",value:function(e){var t=this._cardElement.querySelector(".grid__icon");e?(this._isLiked=e,t.classList.add("grid__icon_active")):(this._isLiked=e,t.classList.remove("grid__icon_active"))}},{key:"createCard",value:function(){var e=this,t=document.querySelector(".grid__template").content.querySelector(".grid__item");this._cardElement=t.cloneNode(!0);var n=this._cardElement.querySelector(".grid__delete-icon");return this._userInfo._id===this._data.owner._id&&n.classList.add("grid__delete-show"),0!==this._data.likes.filter((function(t){return t._id===e._userInfo._id})).length&&(this._isLiked=!0),this.updateLikeCount(this.getCardLikes()),this.updateLikeIconState(this._isLiked),this._cardElement.setAttribute("id",this._id),this._cardImage=this._cardElement.querySelector(".grid__image"),this._cardText=this._cardElement.querySelector(".grid__text"),this._cardImage.style.backgroundImage="url(".concat(this._data.link,")"),this._cardText.textContent=this._data.name,this._setEventListeners(),this._cardElement}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(){var e=this;this._initialArray.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"prepend",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const c=function(){function e(t){var n=t.userName,r=t.userJob,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(n),this.userJob=document.querySelector(r),this.avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this.userName.textContent,userJob:this.userJob.textContent}}},{key:"setUserInfo",value:function(e){var t=e.newName,n=e.newJob,r=e.avatar;this.userName.textContent=t,this.userJob.textContent=n,this.avatar.style.display="block",this.avatar.src=r}},{key:"setPersistedUserInfo",value:function(e){window.localStorage.setItem("userInfo",JSON.stringify(e))}},{key:"getPersistedUserInfo",value:function(){var e=window.localStorage.getItem("userInfo");return JSON.parse(e)}}])&&a(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.classList.add("modal_open")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("modal_open")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("modal__button")||t.target.classList.contains("modal"))&&e.close()}))}}])&&s(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandler=n._submitHandler.bind(_(n)),n._popupSubmit=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return Array.from(this._form.querySelectorAll(".form__input")).forEach((function(t){e[t.name]=t.value})),e}},{key:"renderLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Saving...",t=this._popup.querySelector(".form__button");t.textContent=e}},{key:"setButtonText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Save",t=this._popup.querySelector(".form__button");t.textContent=e}},{key:"close",value:function(){d(y(a.prototype),"close",this).call(this),this.setButtonText(),this._form.reset()}},{key:"_submitHandler",value:function(e){e.preventDefault();var t=this._getInputValues();this._popupSubmit(t),this.renderLoading()}},{key:"setEventListeners",value:function(){d(y(a.prototype),"setEventListeners",this).call(this),this._form=this._popup.querySelector(".form"),this._form.addEventListener("submit",this._submitHandler)}}])&&f(t.prototype,n),a}(u);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupConfirmation=t,n.deletePermission(),n}return t=a,(n=[{key:"deletePermission",value:function(){document.querySelector(".form__delete-confirmation").addEventListener("click",this._popupConfirmation)}}])&&b(t.prototype,n),a}(u);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){C(P(a.prototype),"open",this).call(this);var n=this._popup.querySelector(".modal__image"),r=this._popup.querySelector(".modal__image-caption");n.src=e,r.textContent=t}}])&&L(t.prototype,n),a}(u);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))};const U=function(){function e(t){var n=t.baseUrl,r=t.authToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._authToken=r}var t,n;return t=e,(n=[{key:"getCardList",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authToken}}).then(q)}},{key:"getInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authToken}}).then(q)}},{key:"getInitialData",value:function(){return Promise.all([this.getInfo(),this.getCardList()])}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(q)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authToken}}).then(q)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._authToken}}).then(q)}},{key:"changeLikeCardStatus",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._authToken}}).then(q)}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(q)}},{key:"setUserAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(q)}}])&&T(t.prototype,n),e}();var R=document.querySelector(".profile__edit"),x=document.querySelector(".profile__add"),B=document.querySelector(".form__input_type_title"),N=document.querySelector(".form__input_type_description"),J=(document.querySelector(".profile__image"),document.querySelector(".avatar__overlay")),D={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},A=new t(D,document.querySelector(".form")),V=new t(D,document.querySelector(".form_type_card")),z=new t(D,document.querySelector(".form_type_avatar"));A.enableValidation(),V.enableValidation(),z.enableValidation();var H=null,M=new U({baseUrl:"https://around.nomoreparties.co/v1/group-7",authToken:"47c83c4f-319d-4409-b351-cc8f7164bc50"}),F=new S(".modal_type_delete",(function(){M.removeCard(H.getId()).then((function(e){H.handleDeleteIcon(H.getId()),F.close()})).catch((function(e){console.log(e)}))}));function G(e){var t=e.res,n=new r(t,K.getPersistedUserInfo(),(function(){Q.open(t.link,t.name)}),(function(){H=n,F.open()}),(function(){n.isLiked()?M.deleteLike(n.getId()).then((function(e){n.updateLikeCount(e.likes.length),n.updateLikeIconState(!1)})).catch((function(e){console.log(e)})):M.changeLikeCardStatus(n.getId()).then((function(e){n.updateLikeCount(e.likes.length),n.updateLikeIconState(!0)})).catch((function(e){console.log(e)}))}));return n}F.setEventListeners(),M.getInitialData().then((function(e){var t=e[0],n=e[1];K.setUserInfo({newName:t.name,newJob:t.about,avatar:t.avatar}),K.setPersistedUserInfo(t),function(e){var t=new i({items:e,renderer:function(e){var n=G({res:e}).createCard();t.addItem(n)}},".grid__container");t.renderer();var n=new v(".modal_type_add-card",(function(e){M.addCard(e).then((function(e){var r=G({res:e});t.prepend(r.createCard()),n.close()})).catch((function(e){console.log(e)}))}));n.setEventListeners(),x.addEventListener("click",(function(){n.open()}))}(n)})).catch((function(e){console.log(e)}));var K=new c({userName:".profile__title",userJob:".profile__description",avatar:".profile__image"}),Q=new j(".modal_type_image");Q.setEventListeners();var W=new v(".modal_type_edit-profile",(function(e){M.updateUserInfo({name:e.title,about:e.description}).then((function(e){K.setUserInfo({newName:e.name,newJob:e.about,avatar:e.avatar}),W.close()})).catch((function(e){console.log(e)}))}));W.setEventListeners(),R.addEventListener("click",(function(){var e=K.getUserInfo();B.value=e.userName,N.value=e.userJob,W.open()}));var X=new v(".modal_type_avatar",(function(e){M.setUserAvatar({avatar:e.link}).then((function(e){K.setUserInfo({newName:e.name,newJob:e.about,avatar:e.avatar}),X.close()})).catch((function(e){console.log(e)}))}));X.setEventListeners(),J.addEventListener("click",(function(){X.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwQWxlcnQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm0iLCJ0aGlzIiwiX3NldHRpbmdzIiwiX2Zvcm0iLCJpbnB1dCIsImlucHV0VmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvciIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9zaG93RXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dHMiLCJldmVyeSIsImJ1dHRvbiIsIl9pc0Zvcm1WYWxpZCIsImRpc2FibGVkIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9yRWFjaCIsImUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkYXRhIiwidXNlckluZm8iLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfZGF0YSIsIl9pc0xpa2VkIiwiX2lkIiwiX3VzZXJJbmZvIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwibGlrZXMiLCJsZW5ndGgiLCJldmVudCIsInRhcmdldCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsImNhcmRMaWtlSWNvbiIsImNhcmREZWxldGVJY29uIiwiX2NhcmRJbWFnZSIsImNvdW50IiwibGlrZVN0YXRlIiwibGlrZUljb24iLCJjYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJvd25lciIsImZpbHRlciIsImEiLCJ1cGRhdGVMaWtlQ291bnQiLCJnZXRDYXJkTGlrZXMiLCJ1cGRhdGVMaWtlSWNvblN0YXRlIiwic2V0QXR0cmlidXRlIiwiX2NhcmRUZXh0Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJsaW5rIiwibmFtZSIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaW5pdGlhbEFycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsInVzZXJOYW1lIiwidXNlckpvYiIsImF2YXRhciIsIm5ld05hbWUiLCJuZXdKb2IiLCJkaXNwbGF5Iiwic3JjIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdHJpbmdpZmllZFVzZXJJbmZvIiwiZ2V0SXRlbSIsInBhcnNlIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsInBvcHVwU3VibWl0IiwiX3N1Ym1pdEhhbmRsZXIiLCJfcG9wdXBTdWJtaXQiLCJ2YWx1ZXMiLCJ2YWx1ZSIsImJ1dHRvblRleHQiLCJzYXZlQnV0dG9uIiwic2V0QnV0dG9uVGV4dCIsInJlc2V0Iiwic3VibWl0dGVkVmFsdWVzIiwiX2dldElucHV0VmFsdWVzIiwicmVuZGVyTG9hZGluZyIsIlBvcHVwIiwicG9wdXBDb25maXJtYXRpb24iLCJfcG9wdXBDb25maXJtYXRpb24iLCJkZWxldGVQZXJtaXNzaW9uIiwidGV4dCIsImltYWdlIiwiY2FwdGlvbiIsImFwaVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJfYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsImFsbCIsImdldEluZm8iLCJnZXRDYXJkTGlzdCIsIm1ldGhvZCIsImJvZHkiLCJjYXJkSUQiLCJhYm91dCIsImVkaXRCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwidGl0bGVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJhdmF0YXJPdmVybGF5SWNvbiIsImNvbmZpZyIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwic2VsZWN0ZWRDYXJkIiwiYXBpIiwiQXBpIiwiZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAiLCJQb3B1cEFsZXJ0IiwicmVtb3ZlQ2FyZCIsImdldElkIiwiaGFuZGxlRGVsZXRlSWNvbiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIm1ha2VDYXJkIiwiY2FyZCIsIkNhcmQiLCJnZXRQZXJzaXN0ZWRVc2VySW5mbyIsImltYWdlUHJldmlld01vZGFsIiwib3BlbiIsImlzTGlrZWQiLCJkZWxldGVMaWtlIiwiY2hhbmdlTGlrZUNhcmRTdGF0dXMiLCJzZXRFdmVudExpc3RlbmVycyIsImdldEluaXRpYWxEYXRhIiwiaW5mbyIsImNhcmRzIiwic2V0VXNlckluZm8iLCJzZXRQZXJzaXN0ZWRVc2VySW5mbyIsImluaXRpYWxDYXJkU2VjdGlvbiIsIlNlY3Rpb24iLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiaW1hZ2VGb3JtUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiYWRkQ2FyZCIsIm5ld0NhcmRQcmVwZW5kIiwiaW5pdGlhbGl6ZUNhcmRzIiwiVXNlckluZm8iLCJQb3B1cFdpdGhJbWFnZSIsImVkaXRQcm9maWxlUG9wdXAiLCJ1cGRhdGVVc2VySW5mbyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJnZXRWYWx1ZSIsImdldFVzZXJJbmZvIiwiYXZhdGFyUG9wdXAiLCJzZXRVc2VyQXZhdGFyIl0sIm1hcHBpbmdzIjoieUxBMEVBLFEsV0F6RUUsV0FBWUEsRUFBVUMsSSw0RkFBTSxTQUMxQkMsS0FBS0MsVUFBWUgsRUFDakJFLEtBQUtFLE1BQVFILEUsc0RBR2YsU0FBa0JJLEVBQU9DLEdBQ3ZCLElBQU1DLEVBQVFMLEtBQUtFLE1BQU1JLGNBQVgsV0FBNkJILEVBQU1JLEdBQW5DLFdBQ2RGLEVBQU1HLFlBQWNKLEVBQ3BCRCxFQUFNTSxVQUFVQyxJ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LElBQU10SSxFQUFXLElBQUlrSyxFQUFTLENBQzVCakgsU0FBVSxrQkFDVkMsUUFBUyx3QkFDVEMsT0FBUSxvQkFHSjBGLEVBQW9CLElBQUlzQixFQUFlLHFCQUM3Q3RCLEVBQWtCSyxvQkFHbEIsSUFBTWtCLEVBQW1CLElBQUlOLEVBQzNCLDRCQUNBLFNBQUNsRixHQUVDa0QsRUFDR3VDLGVBQWUsQ0FBRS9ILEtBQU1zQyxFQUFPMEYsTUFBT3JELE1BQU9yQyxFQUFPMkYsY0FDbkQ3RCxNQUFLLFNBQUNiLEdBRUw3RixFQUFTc0osWUFBWSxDQUNuQmxHLFFBQVN5QyxFQUFJdkQsS0FDYmUsT0FBUXdDLEVBQUlvQixNQUNaOUQsT0FBUTBDLEVBQUkxQyxTQUVkaUgsRUFBaUI3RixXQUVsQjhELE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsU0FJcEI4QixFQUFpQmxCLG9CQUVqQmhDLEVBQVd6SCxpQkFBaUIsU0FBUyxXQUNuQyxJQUFNK0ssRUFBV3hLLEVBQVN5SyxjQUMxQnJELFFBQW1Cb0QsRUFBU3ZILFNBQzVCb0UsUUFBeUJtRCxFQUFTdEgsUUFDbENrSCxFQUFpQnRCLFVBSW5CLElBQU00QixFQUFjLElBQUlaLEVBQWMsc0JBQXNCLFNBQUNqRixHQUUzRGlELEVBQ0c2QyxjQUFjLENBQUV4SCxPQUFRMEIsRUFBTXhDLE9BQzlCcUUsTUFBSyxTQUFDYixHQUNMN0YsRUFBU3NKLFlBQVksQ0FDbkJsRyxRQUFTeUMsRUFBSXZELEtBQ2JlLE9BQVF3QyxFQUFJb0IsTUFDWjlELE9BQVEwQyxFQUFJMUMsU0FFZHVILEVBQVluRyxXQUViOEQsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixTQUdsQm9DLEVBQVl4QixvQkFFWjVCLEVBQWtCN0gsaUJBQWlCLFNBQVMsV0FDMUNpTCxFQUFZNUIsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcclxuICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB9XHJcblxyXG4gIF9zaG93RXJyb3JNZXNzYWdlKGlucHV0LCBpbnB1dFZhbGlkYXRpb25NZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IGlucHV0VmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3IgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICB9XHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xyXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAvL1NIT1cgRVJST1JcclxuICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gSElERSBFUlJPUlxyXG4gICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KTtcclxuICAgIH1cclxuICB9XHJcbiAgX2lzRm9ybVZhbGlkKGlucHV0cykge1xyXG4gICAgcmV0dXJuIGlucHV0cy5ldmVyeSgoaW5wdXQpID0+IHtcclxuICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShidXR0b24sIGlucHV0cykge1xyXG4gICAgaWYgKCF0aGlzLl9pc0Zvcm1WYWxpZChpbnB1dHMpKSB7XHJcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBjb25zdCBidXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uLCBpbnB1dHMpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcclxuICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dCk7IC8vIGNsZWFyIHRoZSBlcnJvcnNcclxuICAgICAgfSk7XHJcbiAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7IC8vZGlzYWJsZSB0aGUgYnV0dG9uXHJcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoYnV0dG9uLCBpbnB1dHMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgLy9jYWxsIGV2ZW50TGlzdGVuZXJzXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiXHJcbmNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHVzZXJJbmZvLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmRDbGljayxoYW5kbGVMaWtlQ2xpY2sgKSB7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgIFxyXG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2sgPSBoYW5kbGVEZWxldGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgfSAvLy5ncmlkX190ZW1wbGF0ZVxyXG5cclxuICBnZXRDYXJkTGlrZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuICBfaGFuZGxlTGlrZUljb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZ3JpZF9faWNvbl9hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcclxuICB9XHJcbiAgLy8gcGFzcyBjYXJkIGlkIHRvIHRoaXMgZnVuY3Rpb24gXHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjYXJkTGlrZUljb24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX2ljb25cIik7XHJcbiAgICBjb25zdCBjYXJkRGVsZXRlSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmdyaWRfX2RlbGV0ZS1pY29uXCJcclxuICAgICk7XHJcblxyXG4gICAgLy9saWtlIGJ1dHRvblxyXG4gICAgY2FyZExpa2VJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKSk7XHJcbiAgICAvL2RlbGV0ZSBidXR0b25cclxuICAgIGNhcmREZWxldGVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2soKVxyXG4gICAgKTtcclxuICAgIC8vcHJldmlldyBjYXJkIGltYWdlXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljaygpKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUxpa2VDb3VudChjb3VudCkge1xyXG4gICAgIGNvbnN0IGxpa2VDb3VudGVyID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19saWtlc1wiKTtcclxuICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGNvdW50O1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZUljb25TdGF0ZShsaWtlU3RhdGUpIHtcclxuICAgIGNvbnN0IGxpa2VJY29uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19pY29uXCIpO1xyXG4gICAgaWYgKGxpa2VTdGF0ZSkge1xyXG4gICAgICB0aGlzLl9pc0xpa2VkID0gbGlrZVN0YXRlO1xyXG4gICAgICBsaWtlSWNvbi5jbGFzc0xpc3QuYWRkKFwiZ3JpZF9faWNvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgdGhpcy5faXNMaWtlZCA9IGxpa2VTdGF0ZTtcclxuICAgICAgbGlrZUljb24uY2xhc3NMaXN0LnJlbW92ZShcImdyaWRfX2ljb25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX3RlbXBsYXRlXCIpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZF9faXRlbVwiKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICBjb25zdCBjYXJkRGVsZXRlSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmdyaWRfX2RlbGV0ZS1pY29uXCJcclxuICAgICk7XHJcblxyXG4gICAgLy8gbG9naWMgZm9yIHNob3dpbmcgZGVsZXRlIGljb25cclxuICAgIGlmICh0aGlzLl91c2VySW5mby5faWQgPT09IHRoaXMuX2RhdGEub3duZXIuX2lkKSB7XHJcbiAgICAgIGNhcmREZWxldGVJY29uLmNsYXNzTGlzdC5hZGQoXCJncmlkX19kZWxldGUtc2hvd1wiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy9Mb2dpYyB0byBjaGVjayBpZiBJIGhhdmUgbGlrZWQgdGhlIGNhcmRcclxuICAgIGNvbnN0ICBmaWx0ZXIgPSB0aGlzLl9kYXRhLmxpa2VzLmZpbHRlciggYSA9PiBhLl9pZCA9PT0gdGhpcy5fdXNlckluZm8uX2lkKTtcclxuICAgIGlmKCBmaWx0ZXIubGVuZ3RoICE9PSAwKXtcclxuICAgICAgdGhpcy5faXNMaWtlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29uc3QgbGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ3JpZF9fbGlrZXMnKTtcclxuICAgIC8vIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5nZXRDYXJkTGlrZXMoKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZUxpa2VDb3VudCh0aGlzLmdldENhcmRMaWtlcygpKTtcclxuXHJcblxyXG4gICAgLy8gU2hvdyBmaWxsZWQgbGlrZSBpY29uIGlmIHRoZSBjYXJkIGhhcyBiZWVuIGxpa2VkXHJcbiAgICAvLyBjb25zdCBsaWtlSWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkX19pY29uJyk7XHJcbiAgICAvLyBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgLy8gICBsaWtlSWNvbi5jbGFzc0xpc3QuYWRkKFwiZ3JpZF9faWNvbl9hY3RpdmVcIik7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVMaWtlSWNvblN0YXRlKHRoaXMuX2lzTGlrZWQpO1xyXG5cclxuICAgIC8vc2V0IHVuaXF1ZSBjYXJkIGF0dHJpYnV0ZXNcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuX2lkKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRleHQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX3RleHRcIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9kYXRhLmxpbmt9KWA7XHJcbiAgICB0aGlzLl9jYXJkVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5faW5pdGlhbEFycmF5ID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyZXIoKSB7XHJcbiAgICB0aGlzLl9pbml0aWFsQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG4gIHByZXBlbmQoZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYixhdmF0YXIgfSkge1xyXG4gICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xyXG4gICAgdGhpcy51c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iKTtcclxuICAgIHRoaXMuYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJOYW1lOiB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICB1c2VySm9iOiB0aGlzLnVzZXJKb2IudGV4dENvbnRlbnRcclxuICAgIH07XHJcbiAgfVxyXG4gIHNldFVzZXJJbmZvKHsgbmV3TmFtZSwgbmV3Sm9iLCBhdmF0YXIgfSkge1xyXG5cclxuICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSBuZXdOYW1lO1xyXG4gICAgdGhpcy51c2VySm9iLnRleHRDb250ZW50ID0gbmV3Sm9iO1xyXG4gICAgdGhpcy5hdmF0YXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIHRoaXMuYXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcblxyXG4gIC8vR2V0IHVzZXIgaW5mbyBmcm9tIGFwaSB0aGVuIHNldCB2YWx1ZXMgdG8gbG9jYWxTdG9yYWdlIHVzZXJJbmZvPT5rZXlcclxuICBzZXRQZXJzaXN0ZWRVc2VySW5mbyh1c2VySW5mbyl7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkodXNlckluZm8pKTtcclxuICB9XHJcblxyXG4gIC8vUmV0cmlldmUgc3RvcmVkIHVzZXIgaW5mbyBmcm9tIGxvY2FsU3RvcmFnZVxyXG4gIGdldFBlcnNpc3RlZFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3Qgc3RyaW5naWZpZWRVc2VySW5mbyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdXNlciBpbmZvIGluIEpTT04gZm9ybWF0XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJpbmdpZmllZFVzZXJJbmZvKTtcclxuICB9XHJcbiAgXHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfSAvL3BvcHVwX3R5cGVfZWRpdFxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblxyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19idXR0b25cIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpXHJcbiAgICAgIClcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgcG9wdXBTdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHRoaXMuX3N1Ym1pdEhhbmRsZXIuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX3BvcHVwU3VibWl0ID0gcG9wdXBTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSB7fTtcclxuICAgIC8vc2VhcmNoIGZvciBhbGwgbXkgaW5wdXRzXHJcbiAgICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKSk7XHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIC8vIHRha2UgdGhlIHZhbHVlIG9mIGl0cyBuYW1lIGF0dHJpYnV0ZVxyXG4gICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoYnV0dG9uVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcclxuICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0QnV0dG9uVGV4dChidXR0b25UZXh0ID0gXCJTYXZlXCIpIHtcclxuICAgIGNvbnN0IHNhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2J1dHRvblwiKTtcclxuICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5zZXRCdXR0b25UZXh0KCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG4gIF9zdWJtaXRIYW5kbGVyKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IHN1Ym1pdHRlZFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9wb3B1cFN1Ym1pdChzdWJtaXR0ZWRWYWx1ZXMpO1xyXG4gICAgdGhpcy5yZW5kZXJMb2FkaW5nKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XHJcbmNsYXNzIFBvcHVwQWxlcnQgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgcG9wdXBDb25maXJtYXRpb24pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDb25maXJtYXRpb24gPSBwb3B1cENvbmZpcm1hdGlvbjtcclxuICAgIHRoaXMuZGVsZXRlUGVybWlzc2lvbigpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlUGVybWlzc2lvbigpIHtcclxuICAgIGNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmZvcm1fX2RlbGV0ZS1jb25maXJtYXRpb25cIlxyXG4gICAgKTtcclxuICAgIGRlbGV0ZUNvbmZpcm1hdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fcG9wdXBDb25maXJtYXRpb24pO1xyXG4gIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cEFsZXJ0O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuICBvcGVuKGxpbmssIHRleHQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBjYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKTtcclxuXHJcbiAgICBpbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgY2FwdGlvbi50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xyXG4iLCJjb25zdCBhcGlSZXNwb25zZSA9IChyZXMpID0+IHtcclxuICBpZiAocmVzLm9rKSB7XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxufTtcclxuXHJcbmNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBhdXRoVG9rZW4gfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XHJcbiAgfVxyXG5cclxuICAvLyBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG5cclxuICAvLyBHRVQgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL2NhcmRzXHJcbiAgZ2V0Q2FyZExpc3QoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KS50aGVuKGFwaVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIEdFVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvdXNlcnMvbWVcclxuICBnZXRJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbihhcGlSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBtYWtlIGV2ZXJ5dGhpbmcgc2hvdyB1cCBhdCBvbmNlXHJcbiAgZ2V0SW5pdGlhbERhdGEoKSB7XHJcbiAgICByZXR1cm4gIFByb21pc2UuYWxsKFt0aGlzLmdldEluZm8oKSx0aGlzLmdldENhcmRMaXN0KCldKVxyXG4gIH1cclxuXHJcblxyXG5cclxuICAvLyBQT1NUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkc1xyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKGFwaVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIC8vIERFTEVURSBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvY2FyZHMvY2FyZElkXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oYXBpUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gUFVUIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkcy9saWtlcy9jYXJkSWRcclxuICAvLyBERUxFVEUgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL2NhcmRzL2xpa2VzL2NhcmRJZFxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJRCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElEfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbihhcGlSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBjaGFuZ2VMaWtlQ2FyZFN0YXR1cyhjYXJkSUQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgfSxcclxuICAgIH0pLnRoZW4oYXBpUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gUEFUQ0ggaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkL3VzZXJzL21lXHJcbiAgdXBkYXRlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbihhcGlSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBQQVRDSCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvdXNlcnMvbWUvYXZhdGFyXHJcbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oYXBpUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG5cclxuXHJcbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5dO1xyXG4vL29wZW4gbW9kYWwgYnV0dG9uc1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZFwiKTtcclxuLy8gUHJvZmlsZSBpbnB1dHNcclxuZXhwb3J0IGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5mb3JtX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJPdmVybGF5SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyX19vdmVybGF5XCIpO1xyXG5cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwQWxlcnQgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cEFsZXJ0LmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIHRpdGxlSW5wdXQsXHJcbiAgZGVzY3JpcHRpb25JbnB1dCxcclxuICBwcm9maWxlSW1hZ2UsXHJcbiAgYXZhdGFyT3ZlcmxheUljb24sXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbi8vXHJcbi8vXHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uZmlnLFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKVxyXG4pOyAvL3Bhc3MgaW4gc29tZSBwYXJhbWV0ZXJzXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uZmlnLFxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV90eXBlX2NhcmRcIilcclxuKTtcclxuXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWcsXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX3R5cGVfYXZhdGFyXCIpXHJcbik7XHJcblxyXG4vL2NhbGwgZW5hYmxlVmFsaWRhdGlvbigpIG9uIGJvdGggZm9ybXMgaW5zdGFuY2VzXHJcblxyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxubGV0IHNlbGVjdGVkQ2FyZCA9IG51bGw7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtN1wiLFxyXG4gIGF1dGhUb2tlbjogXCI0N2M4M2M0Zi0zMTlkLTQ0MDktYjM1MS1jYzhmNzE2NGJjNTBcIixcclxufSk7XHJcblxyXG4vLyBERUxFVEUgUE9QVVBcclxuY29uc3QgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAgPSBuZXcgUG9wdXBBbGVydChcIi5tb2RhbF90eXBlX2RlbGV0ZVwiLCAoKSA9PiB7XHJcbiAgLy9cclxuICBhcGlcclxuICAgIC5yZW1vdmVDYXJkKHNlbGVjdGVkQ2FyZC5nZXRJZCgpKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBzZWxlY3RlZENhcmQuaGFuZGxlRGVsZXRlSWNvbihzZWxlY3RlZENhcmQuZ2V0SWQoKSk7XHJcbiAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG59KTtcclxuZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy8gRlVOQ1RJT04gRk9SIE1BS0lORyBDQVJEU1xyXG5mdW5jdGlvbiBtYWtlQ2FyZCh7IHJlcyB9KSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgcmVzLFxyXG4gICAgdXNlckluZm8uZ2V0UGVyc2lzdGVkVXNlckluZm8oKSxcclxuICAgICgpID0+IHtcclxuICAgICAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlbihyZXMubGluaywgcmVzLm5hbWUpO1xyXG4gICAgfSxcclxuICAgICgpID0+IHtcclxuICAgICAgc2VsZWN0ZWRDYXJkID0gY2FyZDtcclxuICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAub3BlbigpOyAvL2NvbmZpcm1hdGlvbiBwb3B1cFxyXG4gICAgfSxcclxuICAgICgpID0+IHtcclxuICAgICAgLy9pZiBjYXJkIGlzIGFscmVhZHkgbGlrZWRcclxuICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlTGlrZShjYXJkLmdldElkKCkpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZUNvdW50KHJlcy5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VJY29uU3RhdGUoZmFsc2UpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvL2lmIGNhcmQgaXMgbm90IGxpa2VkXHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuY2hhbmdlTGlrZUNhcmRTdGF0dXMoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VDb3VudChyZXMubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlSWNvblN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG4vLyBQcm9taXNlLmFsbCAgLi5hbiAgYXJyYXlcclxuYXBpXHJcbiAgLmdldEluaXRpYWxEYXRhKClcclxuICAudGhlbigodmFsdWVzKSA9PiB7XHJcbiAgICBjb25zdCBpbmZvID0gdmFsdWVzWzBdO1xyXG4gICAgY29uc3QgY2FyZHMgPSB2YWx1ZXNbMV07XHJcblxyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuZXdOYW1lOiBpbmZvLm5hbWUsXHJcbiAgICAgIG5ld0pvYjogaW5mby5hYm91dCxcclxuICAgICAgYXZhdGFyOiBpbmZvLmF2YXRhcixcclxuICAgIH0pO1xyXG5cclxuICAgIC8vc3RvcmUgdXNlciBkYXRhIGluIGxvY2FsLXN0b3JhZ2VcclxuICAgIHVzZXJJbmZvLnNldFBlcnNpc3RlZFVzZXJJbmZvKGluZm8pO1xyXG5cclxuICAgIGluaXRpYWxpemVDYXJkcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbi8vIFB1dCBTZWN0aW9uIGluIGEgZnVuY3Rpb24gc28gaSBjYW4gY2FsbCBpdCBpbiBQcm9taXNlLmFsbFxyXG5mdW5jdGlvbiBpbml0aWFsaXplQ2FyZHMocmVzKSB7XHJcbiAgY29uc3QgaW5pdGlhbENhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiByZXMsXHJcbiAgICAgIHJlbmRlcmVyOiAocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IG1ha2VDYXJkKHsgcmVzOiByZXMgfSk7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmNyZWF0ZUNhcmQoKTtcclxuXHJcbiAgICAgICAgaW5pdGlhbENhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIFwiLmdyaWRfX2NvbnRhaW5lclwiXHJcbiAgKTtcclxuICBpbml0aWFsQ2FyZFNlY3Rpb24ucmVuZGVyZXIoKTtcclxuXHJcbiAgY29uc3QgaW1hZ2VGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5tb2RhbF90eXBlX2FkZC1jYXJkXCIsIChkYXRhKSA9PiB7XHJcbiAgICBhcGlcclxuICAgICAgLmFkZENhcmQoZGF0YSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmRQcmVwZW5kID0gbWFrZUNhcmQoeyByZXM6IHJlcyB9KTtcclxuICAgICAgICBpbml0aWFsQ2FyZFNlY3Rpb24ucHJlcGVuZChuZXdDYXJkUHJlcGVuZC5jcmVhdGVDYXJkKCkpO1xyXG4gICAgICAgIGltYWdlRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGltYWdlRm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIGFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGltYWdlRm9ybVBvcHVwLm9wZW4oKTtcclxuICB9KTtcclxufVxyXG4vL1xyXG5cclxuLy8gVVNFUiBJTkZPXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICB1c2VySm9iOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIGF2YXRhcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcblxyXG5jb25zdCBpbWFnZVByZXZpZXdNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX2ltYWdlXCIpO1xyXG5pbWFnZVByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gRURJVCBGT1JNXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIi5tb2RhbF90eXBlX2VkaXQtcHJvZmlsZVwiLFxyXG4gICh2YWx1ZXMpID0+IHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlcyk7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVVzZXJJbmZvKHsgbmFtZTogdmFsdWVzLnRpdGxlLCBhYm91dDogdmFsdWVzLmRlc2NyaXB0aW9uIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgcHJvZmlsZSEhYCwgcmVzKTtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICBuZXdOYW1lOiByZXMubmFtZSxcclxuICAgICAgICAgIG5ld0pvYjogcmVzLmFib3V0LFxyXG4gICAgICAgICAgYXZhdGFyOiByZXMuYXZhdGFyLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuLy9FRElUIEJVVFRPTiBDTElDS1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc3QgZ2V0VmFsdWUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHRpdGxlSW5wdXQudmFsdWUgPSBnZXRWYWx1ZS51c2VyTmFtZTtcclxuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZ2V0VmFsdWUudXNlckpvYjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcbi8vXHJcblxyXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLm1vZGFsX3R5cGVfYXZhdGFyXCIsICh2YWx1ZSkgPT4ge1xyXG4gIC8vIGNvbnNvbGUubG9nKHZhbHVlLmxpbmspO1xyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJBdmF0YXIoeyBhdmF0YXI6IHZhbHVlLmxpbmsgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgIG5ld05hbWU6IHJlcy5uYW1lLFxyXG4gICAgICAgIG5ld0pvYjogcmVzLmFib3V0LFxyXG4gICAgICAgIGF2YXRhcjogcmVzLmF2YXRhcixcclxuICAgICAgfSk7XHJcbiAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG59KTtcclxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmF2YXRhck92ZXJsYXlJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==